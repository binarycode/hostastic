!!!
%html
  %head
    %title
      Hostastic
      - if content_for? :title
        \-
        = yield :title
    = javascript_include_tag :defaults

    = stylesheet_link_tag "screen.css", :media => "screen, projection"
    = stylesheet_link_tag "print.css", :media => "print"
    /[if lt IE 8]
      = stylesheet_link_tag "ie.css", :media => "screen, projection"

    = csrf_meta_tag
  %body
    .container
      .header
        %h1 Hostastic
        Support Issue Tracking
      .user-menu
        - if user_signed_in?
          = current_user.email
          = link_to "Logout", [:destroy, :user, :session]
        - else
          = link_to "Login", [:new, :user, :session]

      - if can? :manage, Ticket
        .search
          = form_tag [:search, :tickets], :method => :get do |f|
            = text_field_tag :query, params[:query]
            = submit_tag "Search", :name => nil

        .menu
          %ul
            %li= link_to_unless_current "New unassigned tickets", [:tickets]
            %li= link_to_unless_current "Open tickets", [:open, :tickets]
            %li= link_to_unless_current "On hold tickets", [:on_hold, :tickets]
            %li= link_to_unless_current "Closed tickets", [:closed, :tickets]
      - [:notice, :warning, :alert].each do |type|
        - if flash[type].present?
          .flash{ :class => "flash-#{type}" }= flash[type]
      .content= yield
